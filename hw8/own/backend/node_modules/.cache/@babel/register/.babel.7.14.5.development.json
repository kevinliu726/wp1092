{
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend\",\"filename\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.14.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend",
      "filename": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/index.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/index.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "const {\n  GraphQLServer,\n  PubSub\n} = require(\"graphql-yoga\");\n\nconst http = require(\"http\");\n\nconst express = require(\"express\");\n\nconst WebSocket = require(\"ws\");\n\nconst mongo = require(\"./mongo\");\n\nconst db = require(\"./db\");\n\nconst Message = require(\"./resolvers/message\");\n\nconst User = require(\"./resolvers/user\");\n\nconst ChatBox = require(\"./resolvers/chatBox\");\n\nconst Query = require(\"./resolvers/Query\");\n\nconst Mutation = require(\"./resolvers/Mutation\");\n\nconst Subscription = require(\"./resolvers/Subscription\");\n\nconst pubsub = new PubSub(); //const server = http.createServer(app);\n//const wss = new WebSocket.Server({ server })\n\nconst server = new GraphQLServer({\n  typeDefs: \"./schema.graphql\",\n  resolvers: {\n    Message,\n    User,\n    ChatBox,\n    Query,\n    Mutation,\n    Subscription\n  },\n  context: {\n    db,\n    pubsub\n  }\n});\nmongo.connect();\nconst PORT = process.env.port || 4000;\nserver.start(PORT, () => {\n  console.log(`Listening on http://localhost:${PORT}`);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkdyYXBoUUxTZXJ2ZXIiLCJQdWJTdWIiLCJyZXF1aXJlIiwiaHR0cCIsImV4cHJlc3MiLCJXZWJTb2NrZXQiLCJtb25nbyIsImRiIiwiTWVzc2FnZSIsIlVzZXIiLCJDaGF0Qm94IiwiUXVlcnkiLCJNdXRhdGlvbiIsIlN1YnNjcmlwdGlvbiIsInB1YnN1YiIsInNlcnZlciIsInR5cGVEZWZzIiwicmVzb2x2ZXJzIiwiY29udGV4dCIsImNvbm5lY3QiLCJQT1JUIiwicHJvY2VzcyIsImVudiIsInBvcnQiLCJzdGFydCIsImNvbnNvbGUiLCJsb2ciXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07QUFBRUEsRUFBQUEsYUFBRjtBQUFpQkMsRUFBQUE7QUFBakIsSUFBNEJDLE9BQU8sQ0FBQyxjQUFELENBQXpDOztBQUNBLE1BQU1DLElBQUksR0FBR0QsT0FBTyxDQUFDLE1BQUQsQ0FBcEI7O0FBQ0EsTUFBTUUsT0FBTyxHQUFHRixPQUFPLENBQUMsU0FBRCxDQUF2Qjs7QUFDQSxNQUFNRyxTQUFTLEdBQUdILE9BQU8sQ0FBQyxJQUFELENBQXpCOztBQUNBLE1BQU1JLEtBQUssR0FBR0osT0FBTyxDQUFDLFNBQUQsQ0FBckI7O0FBQ0EsTUFBTUssRUFBRSxHQUFHTCxPQUFPLENBQUMsTUFBRCxDQUFsQjs7QUFDQSxNQUFNTSxPQUFPLEdBQUdOLE9BQU8sQ0FBQyxxQkFBRCxDQUF2Qjs7QUFDQSxNQUFNTyxJQUFJLEdBQUdQLE9BQU8sQ0FBQyxrQkFBRCxDQUFwQjs7QUFDQSxNQUFNUSxPQUFPLEdBQUdSLE9BQU8sQ0FBQyxxQkFBRCxDQUF2Qjs7QUFDQSxNQUFNUyxLQUFLLEdBQUdULE9BQU8sQ0FBQyxtQkFBRCxDQUFyQjs7QUFDQSxNQUFNVSxRQUFRLEdBQUdWLE9BQU8sQ0FBQyxzQkFBRCxDQUF4Qjs7QUFDQSxNQUFNVyxZQUFZLEdBQUdYLE9BQU8sQ0FBQywwQkFBRCxDQUE1Qjs7QUFFQSxNQUFNWSxNQUFNLEdBQUcsSUFBSWIsTUFBSixFQUFmLEMsQ0FDQTtBQUNBOztBQUVBLE1BQU1jLE1BQU0sR0FBRyxJQUFJZixhQUFKLENBQWtCO0FBQy9CZ0IsRUFBQUEsUUFBUSxFQUFFLGtCQURxQjtBQUUvQkMsRUFBQUEsU0FBUyxFQUFFO0FBQ1RULElBQUFBLE9BRFM7QUFFVEMsSUFBQUEsSUFGUztBQUdUQyxJQUFBQSxPQUhTO0FBSVRDLElBQUFBLEtBSlM7QUFLVEMsSUFBQUEsUUFMUztBQU1UQyxJQUFBQTtBQU5TLEdBRm9CO0FBVS9CSyxFQUFBQSxPQUFPLEVBQUU7QUFDUFgsSUFBQUEsRUFETztBQUVQTyxJQUFBQTtBQUZPO0FBVnNCLENBQWxCLENBQWY7QUFnQkFSLEtBQUssQ0FBQ2EsT0FBTjtBQUNBLE1BQU1DLElBQUksR0FBR0MsT0FBTyxDQUFDQyxHQUFSLENBQVlDLElBQVosSUFBb0IsSUFBakM7QUFFQVIsTUFBTSxDQUFDUyxLQUFQLENBQWFKLElBQWIsRUFBbUIsTUFBTTtBQUN2QkssRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQWEsaUNBQWdDTixJQUFLLEVBQWxEO0FBQ0QsQ0FGRCIsInNvdXJjZVJvb3QiOiIvVXNlcnMva2V2aW5fbGl1L0Rlc2t0b3AvV2ViL3dwMTA5Mi9odzgvb3duL2JhY2tlbmQvIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBHcmFwaFFMU2VydmVyLCBQdWJTdWIgfSA9IHJlcXVpcmUoXCJncmFwaHFsLXlvZ2FcIik7XG5jb25zdCBodHRwID0gcmVxdWlyZShcImh0dHBcIik7XG5jb25zdCBleHByZXNzID0gcmVxdWlyZShcImV4cHJlc3NcIik7XG5jb25zdCBXZWJTb2NrZXQgPSByZXF1aXJlKFwid3NcIik7XG5jb25zdCBtb25nbyA9IHJlcXVpcmUoXCIuL21vbmdvXCIpO1xuY29uc3QgZGIgPSByZXF1aXJlKFwiLi9kYlwiKTtcbmNvbnN0IE1lc3NhZ2UgPSByZXF1aXJlKFwiLi9yZXNvbHZlcnMvbWVzc2FnZVwiKTtcbmNvbnN0IFVzZXIgPSByZXF1aXJlKFwiLi9yZXNvbHZlcnMvdXNlclwiKTtcbmNvbnN0IENoYXRCb3ggPSByZXF1aXJlKFwiLi9yZXNvbHZlcnMvY2hhdEJveFwiKTtcbmNvbnN0IFF1ZXJ5ID0gcmVxdWlyZShcIi4vcmVzb2x2ZXJzL1F1ZXJ5XCIpO1xuY29uc3QgTXV0YXRpb24gPSByZXF1aXJlKFwiLi9yZXNvbHZlcnMvTXV0YXRpb25cIik7XG5jb25zdCBTdWJzY3JpcHRpb24gPSByZXF1aXJlKFwiLi9yZXNvbHZlcnMvU3Vic2NyaXB0aW9uXCIpO1xuXG5jb25zdCBwdWJzdWIgPSBuZXcgUHViU3ViKCk7XG4vL2NvbnN0IHNlcnZlciA9IGh0dHAuY3JlYXRlU2VydmVyKGFwcCk7XG4vL2NvbnN0IHdzcyA9IG5ldyBXZWJTb2NrZXQuU2VydmVyKHsgc2VydmVyIH0pXG5cbmNvbnN0IHNlcnZlciA9IG5ldyBHcmFwaFFMU2VydmVyKHtcbiAgdHlwZURlZnM6IFwiLi9zY2hlbWEuZ3JhcGhxbFwiLFxuICByZXNvbHZlcnM6IHtcbiAgICBNZXNzYWdlLFxuICAgIFVzZXIsXG4gICAgQ2hhdEJveCxcbiAgICBRdWVyeSxcbiAgICBNdXRhdGlvbixcbiAgICBTdWJzY3JpcHRpb24sXG4gIH0sXG4gIGNvbnRleHQ6IHtcbiAgICBkYixcbiAgICBwdWJzdWIsXG4gIH0sXG59KTtcblxubW9uZ28uY29ubmVjdCgpO1xuY29uc3QgUE9SVCA9IHByb2Nlc3MuZW52LnBvcnQgfHwgNDAwMDtcblxuc2VydmVyLnN0YXJ0KFBPUlQsICgpID0+IHtcbiAgY29uc29sZS5sb2coYExpc3RlbmluZyBvbiBodHRwOi8vbG9jYWxob3N0OiR7UE9SVH1gKTtcbn0pO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "GraphQLServer",
        "PubSub",
        "require",
        "http",
        "express",
        "WebSocket",
        "mongo",
        "db",
        "Message",
        "User",
        "ChatBox",
        "Query",
        "Mutation",
        "Subscription",
        "pubsub",
        "server",
        "typeDefs",
        "resolvers",
        "context",
        "connect",
        "PORT",
        "process",
        "env",
        "port",
        "start",
        "console",
        "log"
      ],
      "mappings": "AAAA,MAAM;AAAEA,EAAAA,aAAF;AAAiBC,EAAAA;AAAjB,IAA4BC,OAAO,CAAC,cAAD,CAAzC;;AACA,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAApB;;AACA,MAAME,OAAO,GAAGF,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAMG,SAAS,GAAGH,OAAO,CAAC,IAAD,CAAzB;;AACA,MAAMI,KAAK,GAAGJ,OAAO,CAAC,SAAD,CAArB;;AACA,MAAMK,EAAE,GAAGL,OAAO,CAAC,MAAD,CAAlB;;AACA,MAAMM,OAAO,GAAGN,OAAO,CAAC,qBAAD,CAAvB;;AACA,MAAMO,IAAI,GAAGP,OAAO,CAAC,kBAAD,CAApB;;AACA,MAAMQ,OAAO,GAAGR,OAAO,CAAC,qBAAD,CAAvB;;AACA,MAAMS,KAAK,GAAGT,OAAO,CAAC,mBAAD,CAArB;;AACA,MAAMU,QAAQ,GAAGV,OAAO,CAAC,sBAAD,CAAxB;;AACA,MAAMW,YAAY,GAAGX,OAAO,CAAC,0BAAD,CAA5B;;AAEA,MAAMY,MAAM,GAAG,IAAIb,MAAJ,EAAf,C,CACA;AACA;;AAEA,MAAMc,MAAM,GAAG,IAAIf,aAAJ,CAAkB;AAC/BgB,EAAAA,QAAQ,EAAE,kBADqB;AAE/BC,EAAAA,SAAS,EAAE;AACTT,IAAAA,OADS;AAETC,IAAAA,IAFS;AAGTC,IAAAA,OAHS;AAITC,IAAAA,KAJS;AAKTC,IAAAA,QALS;AAMTC,IAAAA;AANS,GAFoB;AAU/BK,EAAAA,OAAO,EAAE;AACPX,IAAAA,EADO;AAEPO,IAAAA;AAFO;AAVsB,CAAlB,CAAf;AAgBAR,KAAK,CAACa,OAAN;AACA,MAAMC,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC,IAAZ,IAAoB,IAAjC;AAEAR,MAAM,CAACS,KAAP,CAAaJ,IAAb,EAAmB,MAAM;AACvBK,EAAAA,OAAO,CAACC,GAAR,CAAa,iCAAgCN,IAAK,EAAlD;AACD,CAFD",
      "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/",
      "sourcesContent": [
        "const { GraphQLServer, PubSub } = require(\"graphql-yoga\");\nconst http = require(\"http\");\nconst express = require(\"express\");\nconst WebSocket = require(\"ws\");\nconst mongo = require(\"./mongo\");\nconst db = require(\"./db\");\nconst Message = require(\"./resolvers/message\");\nconst User = require(\"./resolvers/user\");\nconst ChatBox = require(\"./resolvers/chatBox\");\nconst Query = require(\"./resolvers/Query\");\nconst Mutation = require(\"./resolvers/Mutation\");\nconst Subscription = require(\"./resolvers/Subscription\");\n\nconst pubsub = new PubSub();\n//const server = http.createServer(app);\n//const wss = new WebSocket.Server({ server })\n\nconst server = new GraphQLServer({\n  typeDefs: \"./schema.graphql\",\n  resolvers: {\n    Message,\n    User,\n    ChatBox,\n    Query,\n    Mutation,\n    Subscription,\n  },\n  context: {\n    db,\n    pubsub,\n  },\n});\n\nmongo.connect();\nconst PORT = process.env.port || 4000;\n\nserver.start(PORT, () => {\n  console.log(`Listening on http://localhost:${PORT}`);\n});\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1623661469585
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend\",\"filename\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/models/message.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.14.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/models/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend",
      "filename": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/models/message.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/models/message.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/models/message.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/models/",
        "sourceFileName": "message.js"
      }
    },
    "ast": null,
    "code": "const mongoose = require(\"mongoose\");\n\nconst Schema = mongoose.Schema; // Creating a schema, sort of like working with an ORM\n\nconst messageSchema = new Schema({\n  sender: {\n    type: mongoose.Types.ObjectId,\n    ref: \"User\"\n  },\n  body: {\n    type: String,\n    required: true\n  }\n}); // Creating a table within database with the defined schema\n\nconst Message = mongoose.model(\"Message\", messageSchema); // Exporting table for querying and mutating\n\nmodule.exports = Message;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1lc3NhZ2UuanMiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJyZXF1aXJlIiwiU2NoZW1hIiwibWVzc2FnZVNjaGVtYSIsInNlbmRlciIsInR5cGUiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwiYm9keSIsIlN0cmluZyIsInJlcXVpcmVkIiwiTWVzc2FnZSIsIm1vZGVsIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBRCxDQUF4Qjs7QUFDQSxNQUFNQyxNQUFNLEdBQUdGLFFBQVEsQ0FBQ0UsTUFBeEIsQyxDQUVBOztBQUNBLE1BQU1DLGFBQWEsR0FBRyxJQUFJRCxNQUFKLENBQVc7QUFDL0JFLEVBQUFBLE1BQU0sRUFBRTtBQUFFQyxJQUFBQSxJQUFJLEVBQUVMLFFBQVEsQ0FBQ00sS0FBVCxDQUFlQyxRQUF2QjtBQUFpQ0MsSUFBQUEsR0FBRyxFQUFFO0FBQXRDLEdBRHVCO0FBRS9CQyxFQUFBQSxJQUFJLEVBQUU7QUFBRUosSUFBQUEsSUFBSSxFQUFFSyxNQUFSO0FBQWdCQyxJQUFBQSxRQUFRLEVBQUU7QUFBMUI7QUFGeUIsQ0FBWCxDQUF0QixDLENBS0E7O0FBQ0EsTUFBTUMsT0FBTyxHQUFHWixRQUFRLENBQUNhLEtBQVQsQ0FBZSxTQUFmLEVBQTBCVixhQUExQixDQUFoQixDLENBRUE7O0FBQ0FXLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQkgsT0FBakIiLCJzb3VyY2VSb290IjoiL1VzZXJzL2tldmluX2xpdS9EZXNrdG9wL1dlYi93cDEwOTIvaHc4L293bi9iYWNrZW5kL21vZGVscy8iLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoXCJtb25nb29zZVwiKTtcbmNvbnN0IFNjaGVtYSA9IG1vbmdvb3NlLlNjaGVtYTtcblxuLy8gQ3JlYXRpbmcgYSBzY2hlbWEsIHNvcnQgb2YgbGlrZSB3b3JraW5nIHdpdGggYW4gT1JNXG5jb25zdCBtZXNzYWdlU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gIHNlbmRlcjogeyB0eXBlOiBtb25nb29zZS5UeXBlcy5PYmplY3RJZCwgcmVmOiBcIlVzZXJcIiB9LFxuICBib2R5OiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbn0pO1xuXG4vLyBDcmVhdGluZyBhIHRhYmxlIHdpdGhpbiBkYXRhYmFzZSB3aXRoIHRoZSBkZWZpbmVkIHNjaGVtYVxuY29uc3QgTWVzc2FnZSA9IG1vbmdvb3NlLm1vZGVsKFwiTWVzc2FnZVwiLCBtZXNzYWdlU2NoZW1hKTtcblxuLy8gRXhwb3J0aW5nIHRhYmxlIGZvciBxdWVyeWluZyBhbmQgbXV0YXRpbmdcbm1vZHVsZS5leHBvcnRzID0gTWVzc2FnZTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "message.js"
      ],
      "names": [
        "mongoose",
        "require",
        "Schema",
        "messageSchema",
        "sender",
        "type",
        "Types",
        "ObjectId",
        "ref",
        "body",
        "String",
        "required",
        "Message",
        "model",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AACA,MAAMC,MAAM,GAAGF,QAAQ,CAACE,MAAxB,C,CAEA;;AACA,MAAMC,aAAa,GAAG,IAAID,MAAJ,CAAW;AAC/BE,EAAAA,MAAM,EAAE;AAAEC,IAAAA,IAAI,EAAEL,QAAQ,CAACM,KAAT,CAAeC,QAAvB;AAAiCC,IAAAA,GAAG,EAAE;AAAtC,GADuB;AAE/BC,EAAAA,IAAI,EAAE;AAAEJ,IAAAA,IAAI,EAAEK,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B;AAFyB,CAAX,CAAtB,C,CAKA;;AACA,MAAMC,OAAO,GAAGZ,QAAQ,CAACa,KAAT,CAAe,SAAf,EAA0BV,aAA1B,CAAhB,C,CAEA;;AACAW,MAAM,CAACC,OAAP,GAAiBH,OAAjB",
      "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/models/",
      "sourcesContent": [
        "const mongoose = require(\"mongoose\");\nconst Schema = mongoose.Schema;\n\n// Creating a schema, sort of like working with an ORM\nconst messageSchema = new Schema({\n  sender: { type: mongoose.Types.ObjectId, ref: \"User\" },\n  body: { type: String, required: true },\n});\n\n// Creating a table within database with the defined schema\nconst Message = mongoose.model(\"Message\", messageSchema);\n\n// Exporting table for querying and mutating\nmodule.exports = Message;\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1623592929870
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend\",\"filename\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/Query.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.14.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend",
      "filename": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/Query.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/Query.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/Query.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/",
        "sourceFileName": "Query.js"
      }
    },
    "ast": null,
    "code": "const Query = {\n  async queryUser(parent, {\n    name\n  }, {\n    db,\n    pubsub\n  }, info) {\n    if (!name) {\n      throw new Error(\"Missing username for queryUser\");\n    } else {\n      return await db.UserModel.findOne({\n        name: name\n      });\n    }\n  },\n\n  async queryChatBox(parent, {\n    name\n  }, {\n    db,\n    pubsub\n  }, info) {\n    if (!name) {\n      throw new Error(\"Missing chatBox name for queryChatBox\");\n    } else {\n      const tmp = await db.ChatBoxModel.findOne({\n        name: name\n      });\n\n      if (!tmp) {\n        throw new Error(\"ChatBox not exist\");\n      }\n\n      return tmp;\n    }\n  },\n\n  async queryMessage(parent, args, {\n    db,\n    pubsub\n  }, info) {\n    return await db.MessageModel.find({});\n  }\n\n};\nmodule.exports = Query;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlF1ZXJ5LmpzIl0sIm5hbWVzIjpbIlF1ZXJ5IiwicXVlcnlVc2VyIiwicGFyZW50IiwibmFtZSIsImRiIiwicHVic3ViIiwiaW5mbyIsIkVycm9yIiwiVXNlck1vZGVsIiwiZmluZE9uZSIsInF1ZXJ5Q2hhdEJveCIsInRtcCIsIkNoYXRCb3hNb2RlbCIsInF1ZXJ5TWVzc2FnZSIsImFyZ3MiLCJNZXNzYWdlTW9kZWwiLCJmaW5kIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsS0FBSyxHQUFHO0FBQ1osUUFBTUMsU0FBTixDQUFnQkMsTUFBaEIsRUFBd0I7QUFBRUMsSUFBQUE7QUFBRixHQUF4QixFQUFrQztBQUFFQyxJQUFBQSxFQUFGO0FBQU1DLElBQUFBO0FBQU4sR0FBbEMsRUFBa0RDLElBQWxELEVBQXdEO0FBQ3RELFFBQUksQ0FBQ0gsSUFBTCxFQUFXO0FBQ1QsWUFBTSxJQUFJSSxLQUFKLENBQVUsZ0NBQVYsQ0FBTjtBQUNELEtBRkQsTUFFTztBQUNMLGFBQU8sTUFBTUgsRUFBRSxDQUFDSSxTQUFILENBQWFDLE9BQWIsQ0FBcUI7QUFBRU4sUUFBQUEsSUFBSSxFQUFFQTtBQUFSLE9BQXJCLENBQWI7QUFDRDtBQUNGLEdBUFc7O0FBU1osUUFBTU8sWUFBTixDQUFtQlIsTUFBbkIsRUFBMkI7QUFBRUMsSUFBQUE7QUFBRixHQUEzQixFQUFxQztBQUFFQyxJQUFBQSxFQUFGO0FBQU1DLElBQUFBO0FBQU4sR0FBckMsRUFBcURDLElBQXJELEVBQTJEO0FBQ3pELFFBQUksQ0FBQ0gsSUFBTCxFQUFXO0FBQ1QsWUFBTSxJQUFJSSxLQUFKLENBQVUsdUNBQVYsQ0FBTjtBQUNELEtBRkQsTUFFTztBQUNMLFlBQU1JLEdBQUcsR0FBRyxNQUFNUCxFQUFFLENBQUNRLFlBQUgsQ0FBZ0JILE9BQWhCLENBQXdCO0FBQUVOLFFBQUFBLElBQUksRUFBRUE7QUFBUixPQUF4QixDQUFsQjs7QUFDQSxVQUFJLENBQUNRLEdBQUwsRUFBVTtBQUNSLGNBQU0sSUFBSUosS0FBSixDQUFVLG1CQUFWLENBQU47QUFDRDs7QUFFRCxhQUFPSSxHQUFQO0FBQ0Q7QUFDRixHQXBCVzs7QUFzQlosUUFBTUUsWUFBTixDQUFtQlgsTUFBbkIsRUFBMkJZLElBQTNCLEVBQWlDO0FBQUVWLElBQUFBLEVBQUY7QUFBTUMsSUFBQUE7QUFBTixHQUFqQyxFQUFpREMsSUFBakQsRUFBdUQ7QUFDckQsV0FBTyxNQUFNRixFQUFFLENBQUNXLFlBQUgsQ0FBZ0JDLElBQWhCLENBQXFCLEVBQXJCLENBQWI7QUFDRDs7QUF4QlcsQ0FBZDtBQTJCQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCbEIsS0FBakIiLCJzb3VyY2VSb290IjoiL1VzZXJzL2tldmluX2xpdS9EZXNrdG9wL1dlYi93cDEwOTIvaHc4L293bi9iYWNrZW5kL3Jlc29sdmVycy8iLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBRdWVyeSA9IHtcbiAgYXN5bmMgcXVlcnlVc2VyKHBhcmVudCwgeyBuYW1lIH0sIHsgZGIsIHB1YnN1YiB9LCBpbmZvKSB7XG4gICAgaWYgKCFuYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIHVzZXJuYW1lIGZvciBxdWVyeVVzZXJcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBhd2FpdCBkYi5Vc2VyTW9kZWwuZmluZE9uZSh7IG5hbWU6IG5hbWUgfSk7XG4gICAgfVxuICB9LFxuXG4gIGFzeW5jIHF1ZXJ5Q2hhdEJveChwYXJlbnQsIHsgbmFtZSB9LCB7IGRiLCBwdWJzdWIgfSwgaW5mbykge1xuICAgIGlmICghbmFtZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBjaGF0Qm94IG5hbWUgZm9yIHF1ZXJ5Q2hhdEJveFwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdG1wID0gYXdhaXQgZGIuQ2hhdEJveE1vZGVsLmZpbmRPbmUoeyBuYW1lOiBuYW1lIH0pO1xuICAgICAgaWYgKCF0bXApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2hhdEJveCBub3QgZXhpc3RcIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0bXA7XG4gICAgfVxuICB9LFxuXG4gIGFzeW5jIHF1ZXJ5TWVzc2FnZShwYXJlbnQsIGFyZ3MsIHsgZGIsIHB1YnN1YiB9LCBpbmZvKSB7XG4gICAgcmV0dXJuIGF3YWl0IGRiLk1lc3NhZ2VNb2RlbC5maW5kKHt9KTtcbiAgfSxcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUXVlcnk7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "Query.js"
      ],
      "names": [
        "Query",
        "queryUser",
        "parent",
        "name",
        "db",
        "pubsub",
        "info",
        "Error",
        "UserModel",
        "findOne",
        "queryChatBox",
        "tmp",
        "ChatBoxModel",
        "queryMessage",
        "args",
        "MessageModel",
        "find",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAMA,KAAK,GAAG;AACZ,QAAMC,SAAN,CAAgBC,MAAhB,EAAwB;AAAEC,IAAAA;AAAF,GAAxB,EAAkC;AAAEC,IAAAA,EAAF;AAAMC,IAAAA;AAAN,GAAlC,EAAkDC,IAAlD,EAAwD;AACtD,QAAI,CAACH,IAAL,EAAW;AACT,YAAM,IAAII,KAAJ,CAAU,gCAAV,CAAN;AACD,KAFD,MAEO;AACL,aAAO,MAAMH,EAAE,CAACI,SAAH,CAAaC,OAAb,CAAqB;AAAEN,QAAAA,IAAI,EAAEA;AAAR,OAArB,CAAb;AACD;AACF,GAPW;;AASZ,QAAMO,YAAN,CAAmBR,MAAnB,EAA2B;AAAEC,IAAAA;AAAF,GAA3B,EAAqC;AAAEC,IAAAA,EAAF;AAAMC,IAAAA;AAAN,GAArC,EAAqDC,IAArD,EAA2D;AACzD,QAAI,CAACH,IAAL,EAAW;AACT,YAAM,IAAII,KAAJ,CAAU,uCAAV,CAAN;AACD,KAFD,MAEO;AACL,YAAMI,GAAG,GAAG,MAAMP,EAAE,CAACQ,YAAH,CAAgBH,OAAhB,CAAwB;AAAEN,QAAAA,IAAI,EAAEA;AAAR,OAAxB,CAAlB;;AACA,UAAI,CAACQ,GAAL,EAAU;AACR,cAAM,IAAIJ,KAAJ,CAAU,mBAAV,CAAN;AACD;;AAED,aAAOI,GAAP;AACD;AACF,GApBW;;AAsBZ,QAAME,YAAN,CAAmBX,MAAnB,EAA2BY,IAA3B,EAAiC;AAAEV,IAAAA,EAAF;AAAMC,IAAAA;AAAN,GAAjC,EAAiDC,IAAjD,EAAuD;AACrD,WAAO,MAAMF,EAAE,CAACW,YAAH,CAAgBC,IAAhB,CAAqB,EAArB,CAAb;AACD;;AAxBW,CAAd;AA2BAC,MAAM,CAACC,OAAP,GAAiBlB,KAAjB",
      "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/",
      "sourcesContent": [
        "const Query = {\n  async queryUser(parent, { name }, { db, pubsub }, info) {\n    if (!name) {\n      throw new Error(\"Missing username for queryUser\");\n    } else {\n      return await db.UserModel.findOne({ name: name });\n    }\n  },\n\n  async queryChatBox(parent, { name }, { db, pubsub }, info) {\n    if (!name) {\n      throw new Error(\"Missing chatBox name for queryChatBox\");\n    } else {\n      const tmp = await db.ChatBoxModel.findOne({ name: name });\n      if (!tmp) {\n        throw new Error(\"ChatBox not exist\");\n      }\n\n      return tmp;\n    }\n  },\n\n  async queryMessage(parent, args, { db, pubsub }, info) {\n    return await db.MessageModel.find({});\n  },\n};\n\nmodule.exports = Query;\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1623661157912
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend\",\"filename\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/Mutation.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.14.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend",
      "filename": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/Mutation.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/Mutation.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/Mutation.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/",
        "sourceFileName": "Mutation.js"
      }
    },
    "ast": null,
    "code": "const uuidv4 = require(\"uuid/v4\");\n\nconst Mutation = {\n  async createChatBox(parent, {\n    name1,\n    name2\n  }, {\n    db\n  }, info) {\n    if (!name1 || !name2) throw new Error(\"Missing chatBox name for CreateChatBox\");\n    let user1 = await db.UserModel.findOne({\n      name: name1\n    });\n    if (!user1) user1 = await new db.UserModel({\n      id: ObjectId,\n      name: name1\n    }).save();\n    let user2 = await db.UserModel.findOne({\n      name: name2\n    });\n    if (!user2) user2 = await new db.UserModel({\n      id: uuidv4(),\n      name: name2\n    }).save();\n    const chatboxName = [name1, name2].sort().join(\"_\");\n    const existing = await db.ChatBoxModel.findOne({\n      name: chatboxName\n    });\n\n    if (existing) {\n      return existing;\n    }\n\n    chatbox = await new db.ChatBoxModel({\n      id: uuidv4(),\n      name: chatboxName,\n      messages: []\n    }).save();\n    return chatbox;\n  },\n\n  async createUser(parent, {\n    name\n  }, {\n    db\n  }, info) {\n    if (!name) throw new Error(\"Missing username\");\n    const existing = await db.UserModel.findOne({\n      name: name\n    });\n\n    if (existing) {\n      return existing;\n    }\n\n    const user = await new db.UserModel({\n      id: uuidv4(),\n      name: name\n    }).save();\n    return user;\n  },\n\n  async createMessage(parent, {\n    chatBoxName,\n    sender,\n    body\n  }, {\n    db,\n    pubsub\n  }, info) {\n    const user_sender = await db.UserModel.findOne({\n      name: sender\n    });\n    if (!user_sender) throw new Error(\"Message sender not exist\");\n    const chatbox = await db.ChatBoxModel.findOne({\n      name: chatBoxName\n    });\n    if (!chatbox) throw new Error(`chatbox ${name} not exist`);\n    const m = await new db.MessageModel({\n      id: uuidv4(),\n      sender: user_sender,\n      body: body\n    }).save();\n    chatbox.messages.push(m);\n    await chatbox.save();\n    pubsub.publish(`chatbox ${chatBoxName}`, {\n      chatbox: {\n        mutation: \"CREAT_MESSAGE\",\n        data: m\n      }\n    });\n    return m;\n  }\n\n};\nmodule.exports = Mutation;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk11dGF0aW9uLmpzIl0sIm5hbWVzIjpbInV1aWR2NCIsInJlcXVpcmUiLCJNdXRhdGlvbiIsImNyZWF0ZUNoYXRCb3giLCJwYXJlbnQiLCJuYW1lMSIsIm5hbWUyIiwiZGIiLCJpbmZvIiwiRXJyb3IiLCJ1c2VyMSIsIlVzZXJNb2RlbCIsImZpbmRPbmUiLCJuYW1lIiwiaWQiLCJPYmplY3RJZCIsInNhdmUiLCJ1c2VyMiIsImNoYXRib3hOYW1lIiwic29ydCIsImpvaW4iLCJleGlzdGluZyIsIkNoYXRCb3hNb2RlbCIsImNoYXRib3giLCJtZXNzYWdlcyIsImNyZWF0ZVVzZXIiLCJ1c2VyIiwiY3JlYXRlTWVzc2FnZSIsImNoYXRCb3hOYW1lIiwic2VuZGVyIiwiYm9keSIsInB1YnN1YiIsInVzZXJfc2VuZGVyIiwibSIsIk1lc3NhZ2VNb2RlbCIsInB1c2giLCJwdWJsaXNoIiwibXV0YXRpb24iLCJkYXRhIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsTUFBTSxHQUFHQyxPQUFPLENBQUMsU0FBRCxDQUF0Qjs7QUFFQSxNQUFNQyxRQUFRLEdBQUc7QUFDZixRQUFNQyxhQUFOLENBQW9CQyxNQUFwQixFQUE0QjtBQUFFQyxJQUFBQSxLQUFGO0FBQVNDLElBQUFBO0FBQVQsR0FBNUIsRUFBOEM7QUFBRUMsSUFBQUE7QUFBRixHQUE5QyxFQUFzREMsSUFBdEQsRUFBNEQ7QUFDMUQsUUFBSSxDQUFDSCxLQUFELElBQVUsQ0FBQ0MsS0FBZixFQUFzQixNQUFNLElBQUlHLEtBQUosQ0FBVSx3Q0FBVixDQUFOO0FBRXRCLFFBQUlDLEtBQUssR0FBRyxNQUFNSCxFQUFFLENBQUNJLFNBQUgsQ0FBYUMsT0FBYixDQUFxQjtBQUFFQyxNQUFBQSxJQUFJLEVBQUVSO0FBQVIsS0FBckIsQ0FBbEI7QUFDQSxRQUFJLENBQUNLLEtBQUwsRUFBWUEsS0FBSyxHQUFHLE1BQU0sSUFBSUgsRUFBRSxDQUFDSSxTQUFQLENBQWlCO0FBQUVHLE1B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QW9CO0FBQ2xDcEIsTUFBQUEsRUFBRSxFQUFFZCxNQUFNLEVBRHdCO0FBRWxDNkIsTUFBQUEsTUFBTSxFQUFFRyxXQUYwQjtBQUdsQ0YsTUFBQUEsSUFBSSxFQUFFQTtBQUg0QixLQUFwQixFQUliZCxJQUphLEVBQWhCO0FBTUFPLElBQUFBLE9BQU8sQ0FBQ0MsUUFBUixDQUFpQlcsSUFBakIsQ0FBc0JGLENBQXRCO0FBQ0EsVUFBTVYsT0FBTyxDQUFDUCxJQUFSLEVBQU47QUFDQWUsSUFBQUEsTUFBTSxDQUFDSyxPQUFQLENBQWdCLFdBQVVSLFdBQVksRUFBdEMsRUFBeUM7QUFDdkNMLE1BQUFBLE9BQU8sRUFBRTtBQUNQYyxRQUFBQSxRQUFRLEVBQUUsZUFESDtBQUVQQyxRQUFBQSxJQUFJLEVBQUVMO0FBRkM7QUFEOEIsS0FBekM7QUFNQSxXQUFPQSxDQUFQO0FBQ0Q7O0FBdkRjLENBQWpCO0FBMERBTSxNQUFNLENBQUNDLE9BQVAsR0FBaUJ0QyxRQUFqQiIsInNvdXJjZVJvb3QiOiIvVXNlcnMva2V2aW5fbGl1L0Rlc2t0b3AvV2ViL3dwMTA5Mi9odzgvb3duL2JhY2tlbmQvcmVzb2x2ZXJzLyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHV1aWR2NCA9IHJlcXVpcmUoXCJ1dWlkL3Y0XCIpO1xuXG5jb25zdCBNdXRhdGlvbiA9IHtcbiAgYXN5bmMgY3JlYXRlQ2hhdEJveChwYXJlbnQsIHsgbmFtZTEsIG5hbWUyIH0sIHsgZGIgfSwgaW5mbykge1xuICAgIGlmICghbmFtZTEgfHwgIW5hbWUyKSB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIGNoYXRCb3ggbmFtZSBmb3IgQ3JlYXRlQ2hhdEJveFwiKTtcblxuICAgIGxldCB1c2VyMSA9IGF3YWl0IGRiLlVzZXJNb2RlbC5maW5kT25lKHsgbmFtZTogbmFtZTEgfSk7XG4gICAgaWYgKCF1c2VyMSkgdXNlcjEgPSBhd2FpdCBuZXcgZGIuVXNlck1vZGVsKHsgaWQ6IE9iamVjdElkLCBuYW1lOiBuYW1lMSB9KS5zYXZlKCk7XG4gICAgbGV0IHVzZXIyID0gYXdhaXQgZGIuVXNlck1vZGVsLmZpbmRPbmUoeyBuYW1lOiBuYW1lMiB9KTtcbiAgICBpZiAoIXVzZXIyKSB1c2VyMiA9IGF3YWl0IG5ldyBkYi5Vc2VyTW9kZWwoeyBpZDogdXVpZHY0KCksIG5hbWU6IG5hbWUyIH0pLnNhdmUoKTtcblxuICAgIGNvbnN0IGNoYXRib3hOYW1lID0gW25hbWUxLCBuYW1lMl0uc29ydCgpLmpvaW4oXCJfXCIpO1xuICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgZGIuQ2hhdEJveE1vZGVsLmZpbmRPbmUoeyBuYW1lOiBjaGF0Ym94TmFtZSB9KTtcbiAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgIHJldHVybiBleGlzdGluZztcbiAgICB9XG4gICAgY2hhdGJveCA9IGF3YWl0IG5ldyBkYi5DaGF0Qm94TW9kZWwoe1xuICAgICAgaWQ6IHV1aWR2NCgpLFxuICAgICAgbmFtZTogY2hhdGJveE5hbWUsXG4gICAgICBtZXNzYWdlczogW10sXG4gICAgfSkuc2F2ZSgpO1xuXG4gICAgcmV0dXJuIGNoYXRib3g7XG4gIH0sXG5cbiAgYXN5bmMgY3JlYXRlVXNlcihwYXJlbnQsIHsgbmFtZSB9LCB7IGRiIH0sIGluZm8pIHtcbiAgICBpZiAoIW5hbWUpIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgdXNlcm5hbWVcIik7XG4gICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBkYi5Vc2VyTW9kZWwuZmluZE9uZSh7IG5hbWU6IG5hbWUgfSk7XG4gICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICByZXR1cm4gZXhpc3Rpbmc7XG4gICAgfVxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBuZXcgZGIuVXNlck1vZGVsKHsgaWQ6IHV1aWR2NCgpLCBuYW1lOiBuYW1lIH0pLnNhdmUoKTtcblxuICAgIHJldHVybiB1c2VyO1xuICB9LFxuXG4gIGFzeW5jIGNyZWF0ZU1lc3NhZ2UocGFyZW50LCB7IGNoYXRCb3hOYW1lLCBzZW5kZXIsIGJvZHkgfSwgeyBkYiwgcHVic3ViIH0sIGluZm8pIHtcbiAgICBjb25zdCB1c2VyX3NlbmRlciA9IGF3YWl0IGRiLlVzZXJNb2RlbC5maW5kT25lKHsgbmFtZTogc2VuZGVyIH0pO1xuICAgIGlmICghdXNlcl9zZW5kZXIpIHRocm93IG5ldyBFcnJvcihcIk1lc3NhZ2Ugc2VuZGVyIG5vdCBleGlzdFwiKTtcblxuICAgIGNvbnN0IGNoYXRib3ggPSBhd2FpdCBkYi5DaGF0Qm94TW9kZWwuZmluZE9uZSh7IG5hbWU6IGNoYXRCb3hOYW1lIH0pO1xuICAgIGlmICghY2hhdGJveCkgdGhyb3cgbmV3IEVycm9yKGBjaGF0Ym94ICR7bmFtZX0gbm90IGV4aXN0YCk7XG4gICAgY29uc3QgbSA9IGF3YWl0IG5ldyBkYi5NZXNzYWdlTW9kZWwoe1xuICAgICAgaWQ6IHV1aWR2NCgpLFxuICAgICAgc2VuZGVyOiB1c2VyX3NlbmRlcixcbiAgICAgIGJvZHk6IGJvZHksXG4gICAgfSkuc2F2ZSgpO1xuXG4gICAgY2hhdGJveC5tZXNzYWdlcy5wdXNoKG0pO1xuICAgIGF3YWl0IGNoYXRib3guc2F2ZSgpO1xuICAgIHB1YnN1Yi5wdWJsaXNoKGBjaGF0Ym94ICR7Y2hhdEJveE5hbWV9YCwge1xuICAgICAgY2hhdGJveDoge1xuICAgICAgICBtdXRhdGlvbjogXCJDUkVBVF9NRVNTQUdFXCIsXG4gICAgICAgIGRhdGE6IG0sXG4gICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBtO1xuICB9LFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBNdXRhdGlvbjtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "Mutation.js"
      ],
      "names": [
        "uuidv4",
        "require",
        "Mutation",
        "createChatBox",
        "parent",
        "name1",
        "name2",
        "db",
        "info",
        "Error",
        "user1",
        "UserModel",
        "findOne",
        "name",
        "id",
        "ObjectId",
        "save",
        "user2",
        "chatboxName",
        "sort",
        "join",
        "existing",
        "ChatBoxModel",
        "chatbox",
        "messages",
        "createUser",
        "user",
        "createMessage",
        "chatBoxName",
        "sender",
        "body",
        "pubsub",
        "user_sender",
        "m",
        "MessageModel",
        "push",
        "publish",
        "mutation",
        "data",
        "module",
        "exports"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/",
      "sourcesContent": [
        "const uuidv4 = require(\"uuid/v4\");\n\nconst Mutation = {\n  async createChatBox(parent, { name1, name2 }, { db }, info) {\n    if (!name1 || !name2) throw new Error(\"Missing chatBox name for CreateChatBox\");\n\n    let user1 = await db.UserModel.findOne({ name: name1 });\n    if (!user1) user1 = await new db.UserModel({ id: ObjectId, name: name1 }).save();\n    let user2 = await db.UserModel.findOne({ name: name2 });\n    if (!user2) user2 = await new db.UserModel({ id: uuidv4(), name: name2 }).save();\n\n    const chatboxName = [name1, name2].sort().join(\"_\");\n    const existing = await db.ChatBoxModel.findOne({ name: chatboxName });\n    if (existing) {\n      return existing;\n    }\n    chatbox = await new db.ChatBoxModel({\n      id: uuidv4(),\n      name: chatboxName,\n      messages: [],\n    }).save();\n\n    return chatbox;\n  },\n\n  async createUser(parent, { name }, { db }, info) {\n    if (!name) throw new Error(\"Missing username\");\n    const existing = await db.UserModel.findOne({ name: name });\n    if (existing) {\n      return existing;\n    }\n    const user = await new db.UserModel({ id: uuidv4(), name: name }).save();\n\n    return user;\n  },\n\n  async createMessage(parent, { chatBoxName, sender, body }, { db, pubsub }, info) {\n    const user_sender = await db.UserModel.findOne({ name: sender });\n    if (!user_sender) throw new Error(\"Message sender not exist\");\n\n    const chatbox = await db.ChatBoxModel.findOne({ name: chatBoxName });\n    if (!chatbox) throw new Error(`chatbox ${name} not exist`);\n    const m = await new db.MessageModel({\n      id: uuidv4(),\n      sender: user_sender,\n      body: body,\n    }).save();\n\n    chatbox.messages.push(m);\n    await chatbox.save();\n    pubsub.publish(`chatbox ${chatBoxName}`, {\n      chatbox: {\n        mutation: \"CREAT_MESSAGE\",\n        data: m,\n      },\n    });\n    return m;\n  },\n};\n\nmodule.exports = Mutation;\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1623661933764
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend\",\"filename\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/models/user.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.14.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/models/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend",
      "filename": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/models/user.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/models/user.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/models/user.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/models/",
        "sourceFileName": "user.js"
      }
    },
    "ast": null,
    "code": "const mongoose = require(\"mongoose\");\n\nconst Schema = mongoose.Schema; // Creating a schema, sort of like working with an ORM\n\nconst userSchema = new Schema({\n  name: {\n    type: String,\n    required: true\n  }\n}); // Creating a table within database with the defined schema\n\nconst User = mongoose.model(\"User\", userSchema); // Exporting table for querying and mutating\n\nmodule.exports = User;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuanMiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJyZXF1aXJlIiwiU2NoZW1hIiwidXNlclNjaGVtYSIsIm5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJVc2VyIiwibW9kZWwiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFELENBQXhCOztBQUNBLE1BQU1DLE1BQU0sR0FBR0YsUUFBUSxDQUFDRSxNQUF4QixDLENBRUE7O0FBQ0EsTUFBTUMsVUFBVSxHQUFHLElBQUlELE1BQUosQ0FBVztBQUM1QkUsRUFBQUEsSUFBSSxFQUFFO0FBQUVDLElBQUFBLElBQUksRUFBRUMsTUFBUjtBQUFnQkMsSUFBQUEsUUFBUSxFQUFFO0FBQTFCO0FBRHNCLENBQVgsQ0FBbkIsQyxDQUlBOztBQUNBLE1BQU1DLElBQUksR0FBR1IsUUFBUSxDQUFDUyxLQUFULENBQWUsTUFBZixFQUF1Qk4sVUFBdkIsQ0FBYixDLENBRUE7O0FBQ0FPLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQkgsSUFBakIiLCJzb3VyY2VSb290IjoiL1VzZXJzL2tldmluX2xpdS9EZXNrdG9wL1dlYi93cDEwOTIvaHc4L293bi9iYWNrZW5kL21vZGVscy8iLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoXCJtb25nb29zZVwiKTtcbmNvbnN0IFNjaGVtYSA9IG1vbmdvb3NlLlNjaGVtYTtcblxuLy8gQ3JlYXRpbmcgYSBzY2hlbWEsIHNvcnQgb2YgbGlrZSB3b3JraW5nIHdpdGggYW4gT1JNXG5jb25zdCB1c2VyU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gIG5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxufSk7XG5cbi8vIENyZWF0aW5nIGEgdGFibGUgd2l0aGluIGRhdGFiYXNlIHdpdGggdGhlIGRlZmluZWQgc2NoZW1hXG5jb25zdCBVc2VyID0gbW9uZ29vc2UubW9kZWwoXCJVc2VyXCIsIHVzZXJTY2hlbWEpO1xuXG4vLyBFeHBvcnRpbmcgdGFibGUgZm9yIHF1ZXJ5aW5nIGFuZCBtdXRhdGluZ1xubW9kdWxlLmV4cG9ydHMgPSBVc2VyO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "user.js"
      ],
      "names": [
        "mongoose",
        "require",
        "Schema",
        "userSchema",
        "name",
        "type",
        "String",
        "required",
        "User",
        "model",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AACA,MAAMC,MAAM,GAAGF,QAAQ,CAACE,MAAxB,C,CAEA;;AACA,MAAMC,UAAU,GAAG,IAAID,MAAJ,CAAW;AAC5BE,EAAAA,IAAI,EAAE;AAAEC,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B;AADsB,CAAX,CAAnB,C,CAIA;;AACA,MAAMC,IAAI,GAAGR,QAAQ,CAACS,KAAT,CAAe,MAAf,EAAuBN,UAAvB,CAAb,C,CAEA;;AACAO,MAAM,CAACC,OAAP,GAAiBH,IAAjB",
      "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/models/",
      "sourcesContent": [
        "const mongoose = require(\"mongoose\");\nconst Schema = mongoose.Schema;\n\n// Creating a schema, sort of like working with an ORM\nconst userSchema = new Schema({\n  name: { type: String, required: true },\n});\n\n// Creating a table within database with the defined schema\nconst User = mongoose.model(\"User\", userSchema);\n\n// Exporting table for querying and mutating\nmodule.exports = User;\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1623592921298
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend\",\"filename\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/models/chatBox.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.14.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/models/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend",
      "filename": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/models/chatBox.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/models/chatBox.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/models/chatBox.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/models/",
        "sourceFileName": "chatBox.js"
      }
    },
    "ast": null,
    "code": "const mongoose = require(\"mongoose\");\n\nconst Schema = mongoose.Schema; // Creating a schema, sort of like working with an ORM\n\nconst chatBoxSchema = new Schema({\n  name: {\n    type: String,\n    required: true\n  },\n  users: [{\n    type: mongoose.Types.ObjectId,\n    ref: \"User\"\n  }],\n  messages: [{\n    type: mongoose.Types.ObjectId,\n    ref: \"Message\"\n  }]\n}); // Creating a table within database with the defined schema\n\nconst ChatBox = mongoose.model(\"ChatBox\", chatBoxSchema); // Exporting table for querying and mutating\n\nmodule.exports = ChatBox;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXRCb3guanMiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJyZXF1aXJlIiwiU2NoZW1hIiwiY2hhdEJveFNjaGVtYSIsIm5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJ1c2VycyIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJtZXNzYWdlcyIsIkNoYXRCb3giLCJtb2RlbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLFVBQUQsQ0FBeEI7O0FBQ0EsTUFBTUMsTUFBTSxHQUFHRixRQUFRLENBQUNFLE1BQXhCLEMsQ0FFQTs7QUFDQSxNQUFNQyxhQUFhLEdBQUcsSUFBSUQsTUFBSixDQUFXO0FBQy9CRSxFQUFBQSxJQUFJLEVBQUU7QUFBRUMsSUFBQUEsSUFBSSxFQUFFQyxNQUFSO0FBQWdCQyxJQUFBQSxRQUFRLEVBQUU7QUFBMUIsR0FEeUI7QUFFL0JDLEVBQUFBLEtBQUssRUFBRSxDQUFDO0FBQUVILElBQUFBLElBQUksRUFBRUwsUUFBUSxDQUFDUyxLQUFULENBQWVDLFFBQXZCO0FBQWlDQyxJQUFBQSxHQUFHLEVBQUU7QUFBdEMsR0FBRCxDQUZ3QjtBQUcvQkMsRUFBQUEsUUFBUSxFQUFFLENBQUM7QUFBRVAsSUFBQUEsSUFBSSxFQUFFTCxRQUFRLENBQUNTLEtBQVQsQ0FBZUMsUUFBdkI7QUFBaUNDLElBQUFBLEdBQUcsRUFBRTtBQUF0QyxHQUFEO0FBSHFCLENBQVgsQ0FBdEIsQyxDQU1BOztBQUNBLE1BQU1FLE9BQU8sR0FBR2IsUUFBUSxDQUFDYyxLQUFULENBQWUsU0FBZixFQUEwQlgsYUFBMUIsQ0FBaEIsQyxDQUVBOztBQUNBWSxNQUFNLENBQUNDLE9BQVAsR0FBaUJILE9BQWpCIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9rZXZpbl9saXUvRGVza3RvcC9XZWIvd3AxMDkyL2h3OC9vd24vYmFja2VuZC9tb2RlbHMvIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKFwibW9uZ29vc2VcIik7XG5jb25zdCBTY2hlbWEgPSBtb25nb29zZS5TY2hlbWE7XG5cbi8vIENyZWF0aW5nIGEgc2NoZW1hLCBzb3J0IG9mIGxpa2Ugd29ya2luZyB3aXRoIGFuIE9STVxuY29uc3QgY2hhdEJveFNjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICBuYW1lOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgdXNlcnM6IFt7IHR5cGU6IG1vbmdvb3NlLlR5cGVzLk9iamVjdElkLCByZWY6IFwiVXNlclwiIH1dLFxuICBtZXNzYWdlczogW3sgdHlwZTogbW9uZ29vc2UuVHlwZXMuT2JqZWN0SWQsIHJlZjogXCJNZXNzYWdlXCIgfV0sXG59KTtcblxuLy8gQ3JlYXRpbmcgYSB0YWJsZSB3aXRoaW4gZGF0YWJhc2Ugd2l0aCB0aGUgZGVmaW5lZCBzY2hlbWFcbmNvbnN0IENoYXRCb3ggPSBtb25nb29zZS5tb2RlbChcIkNoYXRCb3hcIiwgY2hhdEJveFNjaGVtYSk7XG5cbi8vIEV4cG9ydGluZyB0YWJsZSBmb3IgcXVlcnlpbmcgYW5kIG11dGF0aW5nXG5tb2R1bGUuZXhwb3J0cyA9IENoYXRCb3g7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "chatBox.js"
      ],
      "names": [
        "mongoose",
        "require",
        "Schema",
        "chatBoxSchema",
        "name",
        "type",
        "String",
        "required",
        "users",
        "Types",
        "ObjectId",
        "ref",
        "messages",
        "ChatBox",
        "model",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AACA,MAAMC,MAAM,GAAGF,QAAQ,CAACE,MAAxB,C,CAEA;;AACA,MAAMC,aAAa,GAAG,IAAID,MAAJ,CAAW;AAC/BE,EAAAA,IAAI,EAAE;AAAEC,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GADyB;AAE/BC,EAAAA,KAAK,EAAE,CAAC;AAAEH,IAAAA,IAAI,EAAEL,QAAQ,CAACS,KAAT,CAAeC,QAAvB;AAAiCC,IAAAA,GAAG,EAAE;AAAtC,GAAD,CAFwB;AAG/BC,EAAAA,QAAQ,EAAE,CAAC;AAAEP,IAAAA,IAAI,EAAEL,QAAQ,CAACS,KAAT,CAAeC,QAAvB;AAAiCC,IAAAA,GAAG,EAAE;AAAtC,GAAD;AAHqB,CAAX,CAAtB,C,CAMA;;AACA,MAAME,OAAO,GAAGb,QAAQ,CAACc,KAAT,CAAe,SAAf,EAA0BX,aAA1B,CAAhB,C,CAEA;;AACAY,MAAM,CAACC,OAAP,GAAiBH,OAAjB",
      "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/models/",
      "sourcesContent": [
        "const mongoose = require(\"mongoose\");\nconst Schema = mongoose.Schema;\n\n// Creating a schema, sort of like working with an ORM\nconst chatBoxSchema = new Schema({\n  name: { type: String, required: true },\n  users: [{ type: mongoose.Types.ObjectId, ref: \"User\" }],\n  messages: [{ type: mongoose.Types.ObjectId, ref: \"Message\" }],\n});\n\n// Creating a table within database with the defined schema\nconst ChatBox = mongoose.model(\"ChatBox\", chatBoxSchema);\n\n// Exporting table for querying and mutating\nmodule.exports = ChatBox;\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1623593155375
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend\",\"filename\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/ChatBox.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.14.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend",
      "filename": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/ChatBox.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/ChatBox.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/ChatBox.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/",
        "sourceFileName": "ChatBox.js"
      }
    },
    "ast": null,
    "code": "const ChatBox = {\n  messages(parent, args, {\n    db\n  }, info) {\n    return Promise.all(parent.messages.map(mId => db.MessageModel.findById(mId)));\n  }\n\n};\nmodule.exports = ChatBox;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNoYXRCb3guanMiXSwibmFtZXMiOlsiQ2hhdEJveCIsIm1lc3NhZ2VzIiwicGFyZW50IiwiYXJncyIsImRiIiwiaW5mbyIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJtSWQiLCJNZXNzYWdlTW9kZWwiLCJmaW5kQnlJZCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBRztBQUNkQyxFQUFBQSxRQUFRLENBQUNDLE1BQUQsRUFBU0MsSUFBVCxFQUFlO0FBQUVDLElBQUFBO0FBQUYsR0FBZixFQUF1QkMsSUFBdkIsRUFBNkI7QUFDbkMsV0FBT0MsT0FBTyxDQUFDQyxHQUFSLENBQVlMLE1BQU0sQ0FBQ0QsUUFBUCxDQUFnQk8sR0FBaEIsQ0FBcUJDLEdBQUQsSUFBU0wsRUFBRSxDQUFDTSxZQUFILENBQWdCQyxRQUFoQixDQUF5QkYsR0FBekIsQ0FBN0IsQ0FBWixDQUFQO0FBQ0Q7O0FBSGEsQ0FBaEI7QUFNQUcsTUFBTSxDQUFDQyxPQUFQLEdBQWlCYixPQUFqQiIsInNvdXJjZVJvb3QiOiIvVXNlcnMva2V2aW5fbGl1L0Rlc2t0b3AvV2ViL3dwMTA5Mi9odzgvb3duL2JhY2tlbmQvcmVzb2x2ZXJzLyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IENoYXRCb3ggPSB7XG4gIG1lc3NhZ2VzKHBhcmVudCwgYXJncywgeyBkYiB9LCBpbmZvKSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHBhcmVudC5tZXNzYWdlcy5tYXAoKG1JZCkgPT4gZGIuTWVzc2FnZU1vZGVsLmZpbmRCeUlkKG1JZCkpKTtcbiAgfSxcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQ2hhdEJveDtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "ChatBox.js"
      ],
      "names": [
        "ChatBox",
        "messages",
        "parent",
        "args",
        "db",
        "info",
        "Promise",
        "all",
        "map",
        "mId",
        "MessageModel",
        "findById",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAMA,OAAO,GAAG;AACdC,EAAAA,QAAQ,CAACC,MAAD,EAASC,IAAT,EAAe;AAAEC,IAAAA;AAAF,GAAf,EAAuBC,IAAvB,EAA6B;AACnC,WAAOC,OAAO,CAACC,GAAR,CAAYL,MAAM,CAACD,QAAP,CAAgBO,GAAhB,CAAqBC,GAAD,IAASL,EAAE,CAACM,YAAH,CAAgBC,QAAhB,CAAyBF,GAAzB,CAA7B,CAAZ,CAAP;AACD;;AAHa,CAAhB;AAMAG,MAAM,CAACC,OAAP,GAAiBb,OAAjB",
      "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/",
      "sourcesContent": [
        "const ChatBox = {\n  messages(parent, args, { db }, info) {\n    return Promise.all(parent.messages.map((mId) => db.MessageModel.findById(mId)));\n  },\n};\n\nmodule.exports = ChatBox;\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1623593750518
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend\",\"filename\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/mongo.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.14.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend",
      "filename": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/mongo.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/mongo.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/mongo.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/",
        "sourceFileName": "mongo.js"
      }
    },
    "ast": null,
    "code": "require(\"dotenv-defaults\").config();\n\nconst mongoose = require(\"mongoose\");\n\nfunction connectMongo() {\n  if (!process.env.MONGO_URL) {\n    console.error(\"Missing MONGO_URL!!!\");\n    process.exit(1);\n  }\n\n  mongoose.connect(process.env.MONGO_URL, {\n    useNewUrlParser: true,\n    useUnifiedTopology: true\n  });\n  const db = mongoose.connection;\n  db.on(\"error\", error => {\n    console.log(\"Failed to connect mongodb \");\n    console.error(error);\n  });\n  db.once(\"open\", () => {\n    console.log(\"MongoDB connected!\");\n  });\n}\n\nconst mongo = {\n  connect: connectMongo\n};\nmodule.exports = mongo;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vbmdvLmpzIl0sIm5hbWVzIjpbInJlcXVpcmUiLCJjb25maWciLCJtb25nb29zZSIsImNvbm5lY3RNb25nbyIsInByb2Nlc3MiLCJlbnYiLCJNT05HT19VUkwiLCJjb25zb2xlIiwiZXJyb3IiLCJleGl0IiwiY29ubmVjdCIsInVzZU5ld1VybFBhcnNlciIsInVzZVVuaWZpZWRUb3BvbG9neSIsImRiIiwiY29ubmVjdGlvbiIsIm9uIiwibG9nIiwib25jZSIsIm1vbmdvIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUFBLE9BQU8sQ0FBQyxpQkFBRCxDQUFQLENBQTJCQyxNQUEzQjs7QUFDQSxNQUFNQyxRQUFRLEdBQUdGLE9BQU8sQ0FBQyxVQUFELENBQXhCOztBQUNBLFNBQVNHLFlBQVQsR0FBd0I7QUFDdEIsTUFBSSxDQUFDQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsU0FBakIsRUFBNEI7QUFDMUJDLElBQUFBLE9BQU8sQ0FBQ0MsS0FBUixDQUFjLHNCQUFkO0FBQ0FKLElBQUFBLE9BQU8sQ0FBQ0ssSUFBUixDQUFhLENBQWI7QUFDRDs7QUFFRFAsRUFBQUEsUUFBUSxDQUFDUSxPQUFULENBQWlCTixPQUFPLENBQUNDLEdBQVIsQ0FBWUMsU0FBN0IsRUFBd0M7QUFDdENLLElBQUFBLGVBQWUsRUFBRSxJQURxQjtBQUV0Q0MsSUFBQUEsa0JBQWtCLEVBQUU7QUFGa0IsR0FBeEM7QUFLQSxRQUFNQyxFQUFFLEdBQUdYLFFBQVEsQ0FBQ1ksVUFBcEI7QUFFQUQsRUFBQUEsRUFBRSxDQUFDRSxFQUFILENBQU0sT0FBTixFQUFnQlAsS0FBRCxJQUFXO0FBQ3hCRCxJQUFBQSxPQUFPLENBQUNTLEdBQVIsQ0FBWSw0QkFBWjtBQUNBVCxJQUFBQSxPQUFPLENBQUNDLEtBQVIsQ0FBY0EsS0FBZDtBQUNELEdBSEQ7QUFLQUssRUFBQUEsRUFBRSxDQUFDSSxJQUFILENBQVEsTUFBUixFQUFnQixNQUFNO0FBQ3BCVixJQUFBQSxPQUFPLENBQUNTLEdBQVIsQ0FBWSxvQkFBWjtBQUNELEdBRkQ7QUFHRDs7QUFFRCxNQUFNRSxLQUFLLEdBQUc7QUFDWlIsRUFBQUEsT0FBTyxFQUFFUDtBQURHLENBQWQ7QUFHQWdCLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQkYsS0FBakIiLCJzb3VyY2VSb290IjoiL1VzZXJzL2tldmluX2xpdS9EZXNrdG9wL1dlYi93cDEwOTIvaHc4L293bi9iYWNrZW5kLyIsInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoXCJkb3RlbnYtZGVmYXVsdHNcIikuY29uZmlnKCk7XG5jb25zdCBtb25nb29zZSA9IHJlcXVpcmUoXCJtb25nb29zZVwiKTtcbmZ1bmN0aW9uIGNvbm5lY3RNb25nbygpIHtcbiAgaWYgKCFwcm9jZXNzLmVudi5NT05HT19VUkwpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiTWlzc2luZyBNT05HT19VUkwhISFcIik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgbW9uZ29vc2UuY29ubmVjdChwcm9jZXNzLmVudi5NT05HT19VUkwsIHtcbiAgICB1c2VOZXdVcmxQYXJzZXI6IHRydWUsXG4gICAgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlLFxuICB9KTtcblxuICBjb25zdCBkYiA9IG1vbmdvb3NlLmNvbm5lY3Rpb247XG5cbiAgZGIub24oXCJlcnJvclwiLCAoZXJyb3IpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcIkZhaWxlZCB0byBjb25uZWN0IG1vbmdvZGIgXCIpO1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICB9KTtcblxuICBkYi5vbmNlKFwib3BlblwiLCAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJNb25nb0RCIGNvbm5lY3RlZCFcIik7XG4gIH0pO1xufVxuXG5jb25zdCBtb25nbyA9IHtcbiAgY29ubmVjdDogY29ubmVjdE1vbmdvLFxufTtcbm1vZHVsZS5leHBvcnRzID0gbW9uZ287XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "mongo.js"
      ],
      "names": [
        "require",
        "config",
        "mongoose",
        "connectMongo",
        "process",
        "env",
        "MONGO_URL",
        "console",
        "error",
        "exit",
        "connect",
        "useNewUrlParser",
        "useUnifiedTopology",
        "db",
        "connection",
        "on",
        "log",
        "once",
        "mongo",
        "module",
        "exports"
      ],
      "mappings": "AAAAA,OAAO,CAAC,iBAAD,CAAP,CAA2BC,MAA3B;;AACA,MAAMC,QAAQ,GAAGF,OAAO,CAAC,UAAD,CAAxB;;AACA,SAASG,YAAT,GAAwB;AACtB,MAAI,CAACC,OAAO,CAACC,GAAR,CAAYC,SAAjB,EAA4B;AAC1BC,IAAAA,OAAO,CAACC,KAAR,CAAc,sBAAd;AACAJ,IAAAA,OAAO,CAACK,IAAR,CAAa,CAAb;AACD;;AAEDP,EAAAA,QAAQ,CAACQ,OAAT,CAAiBN,OAAO,CAACC,GAAR,CAAYC,SAA7B,EAAwC;AACtCK,IAAAA,eAAe,EAAE,IADqB;AAEtCC,IAAAA,kBAAkB,EAAE;AAFkB,GAAxC;AAKA,QAAMC,EAAE,GAAGX,QAAQ,CAACY,UAApB;AAEAD,EAAAA,EAAE,CAACE,EAAH,CAAM,OAAN,EAAgBP,KAAD,IAAW;AACxBD,IAAAA,OAAO,CAACS,GAAR,CAAY,4BAAZ;AACAT,IAAAA,OAAO,CAACC,KAAR,CAAcA,KAAd;AACD,GAHD;AAKAK,EAAAA,EAAE,CAACI,IAAH,CAAQ,MAAR,EAAgB,MAAM;AACpBV,IAAAA,OAAO,CAACS,GAAR,CAAY,oBAAZ;AACD,GAFD;AAGD;;AAED,MAAME,KAAK,GAAG;AACZR,EAAAA,OAAO,EAAEP;AADG,CAAd;AAGAgB,MAAM,CAACC,OAAP,GAAiBF,KAAjB",
      "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/",
      "sourcesContent": [
        "require(\"dotenv-defaults\").config();\nconst mongoose = require(\"mongoose\");\nfunction connectMongo() {\n  if (!process.env.MONGO_URL) {\n    console.error(\"Missing MONGO_URL!!!\");\n    process.exit(1);\n  }\n\n  mongoose.connect(process.env.MONGO_URL, {\n    useNewUrlParser: true,\n    useUnifiedTopology: true,\n  });\n\n  const db = mongoose.connection;\n\n  db.on(\"error\", (error) => {\n    console.log(\"Failed to connect mongodb \");\n    console.error(error);\n  });\n\n  db.once(\"open\", () => {\n    console.log(\"MongoDB connected!\");\n  });\n}\n\nconst mongo = {\n  connect: connectMongo,\n};\nmodule.exports = mongo;\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1623603885028
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend\",\"filename\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/db.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.14.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend",
      "filename": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/db.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/db.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/db.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/",
        "sourceFileName": "db.js"
      }
    },
    "ast": null,
    "code": "const mongoose = require(\"mongoose\");\n\nconst Schema = mongoose.Schema;\nconst userSchema = new Schema({\n  name: {\n    type: String,\n    required: true\n  }\n});\nconst messageSchema = new Schema({\n  sender: {\n    type: mongoose.Types.ObjectId,\n    ref: \"User\"\n  },\n  body: {\n    type: String,\n    required: true\n  }\n});\nconst chatBoxSchema = new Schema({\n  name: {\n    type: String,\n    required: true\n  },\n  messages: [{\n    type: mongoose.Types.ObjectId,\n    ref: \"Message\"\n  }]\n});\nconst UserModel = mongoose.model(\"User\", userSchema);\nconst ChatBoxModel = mongoose.model(\"ChatBox\", chatBoxSchema);\nconst MessageModel = mongoose.model(\"Message\", messageSchema);\nmodule.exports = {\n  UserModel,\n  ChatBoxModel,\n  MessageModel\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRiLmpzIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwicmVxdWlyZSIsIlNjaGVtYSIsInVzZXJTY2hlbWEiLCJuYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwibWVzc2FnZVNjaGVtYSIsInNlbmRlciIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJib2R5IiwiY2hhdEJveFNjaGVtYSIsIm1lc3NhZ2VzIiwiVXNlck1vZGVsIiwibW9kZWwiLCJDaGF0Qm94TW9kZWwiLCJNZXNzYWdlTW9kZWwiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFELENBQXhCOztBQUNBLE1BQU1DLE1BQU0sR0FBR0YsUUFBUSxDQUFDRSxNQUF4QjtBQUVBLE1BQU1DLFVBQVUsR0FBRyxJQUFJRCxNQUFKLENBQVc7QUFDNUJFLEVBQUFBLElBQUksRUFBRTtBQUFFQyxJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLFFBQVEsRUFBRTtBQUExQjtBQURzQixDQUFYLENBQW5CO0FBSUEsTUFBTUMsYUFBYSxHQUFHLElBQUlOLE1BQUosQ0FBVztBQUMvQk8sRUFBQUEsTUFBTSxFQUFFO0FBQUVKLElBQUFBLElBQUksRUFBRUwsUUFBUSxDQUFDVSxLQUFULENBQWVDLFFBQXZCO0FBQWlDQyxJQUFBQSxHQUFHLEVBQUU7QUFBdEMsR0FEdUI7QUFFL0JDLEVBQUFBLElBQUksRUFBRTtBQUFFUixJQUFBQSxJQUFJLEVBQUVDLE1BQVI7QUFBZ0JDLElBQUFBLFFBQVEsRUFBRTtBQUExQjtBQUZ5QixDQUFYLENBQXRCO0FBS0EsTUFBTU8sYUFBYSxHQUFHLElBQUlaLE1BQUosQ0FBVztBQUMvQkUsRUFBQUEsSUFBSSxFQUFFO0FBQUVDLElBQUFBLElBQUksRUFBRUMsTUFBUjtBQUFnQkMsSUFBQUEsUUFBUSxFQUFFO0FBQTFCLEdBRHlCO0FBRS9CUSxFQUFBQSxRQUFRLEVBQUUsQ0FBQztBQUFFVixJQUFBQSxJQUFJLEVBQUVMLFFBQVEsQ0FBQ1UsS0FBVCxDQUFlQyxRQUF2QjtBQUFpQ0MsSUFBQUEsR0FBRyxFQUFFO0FBQXRDLEdBQUQ7QUFGcUIsQ0FBWCxDQUF0QjtBQUtBLE1BQU1JLFNBQVMsR0FBR2hCLFFBQVEsQ0FBQ2lCLEtBQVQsQ0FBZSxNQUFmLEVBQXVCZCxVQUF2QixDQUFsQjtBQUNBLE1BQU1lLFlBQVksR0FBR2xCLFFBQVEsQ0FBQ2lCLEtBQVQsQ0FBZSxTQUFmLEVBQTBCSCxhQUExQixDQUFyQjtBQUNBLE1BQU1LLFlBQVksR0FBR25CLFFBQVEsQ0FBQ2lCLEtBQVQsQ0FBZSxTQUFmLEVBQTBCVCxhQUExQixDQUFyQjtBQUVBWSxNQUFNLENBQUNDLE9BQVAsR0FBaUI7QUFBRUwsRUFBQUEsU0FBRjtBQUFhRSxFQUFBQSxZQUFiO0FBQTJCQyxFQUFBQTtBQUEzQixDQUFqQiIsInNvdXJjZVJvb3QiOiIvVXNlcnMva2V2aW5fbGl1L0Rlc2t0b3AvV2ViL3dwMTA5Mi9odzgvb3duL2JhY2tlbmQvIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKFwibW9uZ29vc2VcIik7XG5jb25zdCBTY2hlbWEgPSBtb25nb29zZS5TY2hlbWE7XG5cbmNvbnN0IHVzZXJTY2hlbWEgPSBuZXcgU2NoZW1hKHtcbiAgbmFtZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG59KTtcblxuY29uc3QgbWVzc2FnZVNjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICBzZW5kZXI6IHsgdHlwZTogbW9uZ29vc2UuVHlwZXMuT2JqZWN0SWQsIHJlZjogXCJVc2VyXCIgfSxcbiAgYm9keTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG59KTtcblxuY29uc3QgY2hhdEJveFNjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICBuYW1lOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgbWVzc2FnZXM6IFt7IHR5cGU6IG1vbmdvb3NlLlR5cGVzLk9iamVjdElkLCByZWY6IFwiTWVzc2FnZVwiIH1dLFxufSk7XG5cbmNvbnN0IFVzZXJNb2RlbCA9IG1vbmdvb3NlLm1vZGVsKFwiVXNlclwiLCB1c2VyU2NoZW1hKTtcbmNvbnN0IENoYXRCb3hNb2RlbCA9IG1vbmdvb3NlLm1vZGVsKFwiQ2hhdEJveFwiLCBjaGF0Qm94U2NoZW1hKTtcbmNvbnN0IE1lc3NhZ2VNb2RlbCA9IG1vbmdvb3NlLm1vZGVsKFwiTWVzc2FnZVwiLCBtZXNzYWdlU2NoZW1hKTtcblxubW9kdWxlLmV4cG9ydHMgPSB7IFVzZXJNb2RlbCwgQ2hhdEJveE1vZGVsLCBNZXNzYWdlTW9kZWwgfTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "db.js"
      ],
      "names": [
        "mongoose",
        "require",
        "Schema",
        "userSchema",
        "name",
        "type",
        "String",
        "required",
        "messageSchema",
        "sender",
        "Types",
        "ObjectId",
        "ref",
        "body",
        "chatBoxSchema",
        "messages",
        "UserModel",
        "model",
        "ChatBoxModel",
        "MessageModel",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AACA,MAAMC,MAAM,GAAGF,QAAQ,CAACE,MAAxB;AAEA,MAAMC,UAAU,GAAG,IAAID,MAAJ,CAAW;AAC5BE,EAAAA,IAAI,EAAE;AAAEC,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B;AADsB,CAAX,CAAnB;AAIA,MAAMC,aAAa,GAAG,IAAIN,MAAJ,CAAW;AAC/BO,EAAAA,MAAM,EAAE;AAAEJ,IAAAA,IAAI,EAAEL,QAAQ,CAACU,KAAT,CAAeC,QAAvB;AAAiCC,IAAAA,GAAG,EAAE;AAAtC,GADuB;AAE/BC,EAAAA,IAAI,EAAE;AAAER,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B;AAFyB,CAAX,CAAtB;AAKA,MAAMO,aAAa,GAAG,IAAIZ,MAAJ,CAAW;AAC/BE,EAAAA,IAAI,EAAE;AAAEC,IAAAA,IAAI,EAAEC,MAAR;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GADyB;AAE/BQ,EAAAA,QAAQ,EAAE,CAAC;AAAEV,IAAAA,IAAI,EAAEL,QAAQ,CAACU,KAAT,CAAeC,QAAvB;AAAiCC,IAAAA,GAAG,EAAE;AAAtC,GAAD;AAFqB,CAAX,CAAtB;AAKA,MAAMI,SAAS,GAAGhB,QAAQ,CAACiB,KAAT,CAAe,MAAf,EAAuBd,UAAvB,CAAlB;AACA,MAAMe,YAAY,GAAGlB,QAAQ,CAACiB,KAAT,CAAe,SAAf,EAA0BH,aAA1B,CAArB;AACA,MAAMK,YAAY,GAAGnB,QAAQ,CAACiB,KAAT,CAAe,SAAf,EAA0BT,aAA1B,CAArB;AAEAY,MAAM,CAACC,OAAP,GAAiB;AAAEL,EAAAA,SAAF;AAAaE,EAAAA,YAAb;AAA2BC,EAAAA;AAA3B,CAAjB",
      "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/",
      "sourcesContent": [
        "const mongoose = require(\"mongoose\");\nconst Schema = mongoose.Schema;\n\nconst userSchema = new Schema({\n  name: { type: String, required: true },\n});\n\nconst messageSchema = new Schema({\n  sender: { type: mongoose.Types.ObjectId, ref: \"User\" },\n  body: { type: String, required: true },\n});\n\nconst chatBoxSchema = new Schema({\n  name: { type: String, required: true },\n  messages: [{ type: mongoose.Types.ObjectId, ref: \"Message\" }],\n});\n\nconst UserModel = mongoose.model(\"User\", userSchema);\nconst ChatBoxModel = mongoose.model(\"ChatBox\", chatBoxSchema);\nconst MessageModel = mongoose.model(\"Message\", messageSchema);\n\nmodule.exports = { UserModel, ChatBoxModel, MessageModel };\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1623603796185
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend\",\"filename\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/message.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.14.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend",
      "filename": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/message.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/message.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/message.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/",
        "sourceFileName": "message.js"
      }
    },
    "ast": null,
    "code": "const Message = {\n  sender(parent, args, {\n    db\n  }, info) {\n    return Promise.resolve(db.UserModel.findById(parent.sender));\n  }\n\n};\nmodule.exports = Message;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1lc3NhZ2UuanMiXSwibmFtZXMiOlsiTWVzc2FnZSIsInNlbmRlciIsInBhcmVudCIsImFyZ3MiLCJkYiIsImluZm8iLCJQcm9taXNlIiwicmVzb2x2ZSIsIlVzZXJNb2RlbCIsImZpbmRCeUlkIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHO0FBQ2RDLEVBQUFBLE1BQU0sQ0FBQ0MsTUFBRCxFQUFTQyxJQUFULEVBQWU7QUFBRUMsSUFBQUE7QUFBRixHQUFmLEVBQXVCQyxJQUF2QixFQUE2QjtBQUNqQyxXQUFPQyxPQUFPLENBQUNDLE9BQVIsQ0FBZ0JILEVBQUUsQ0FBQ0ksU0FBSCxDQUFhQyxRQUFiLENBQXNCUCxNQUFNLENBQUNELE1BQTdCLENBQWhCLENBQVA7QUFDRDs7QUFIYSxDQUFoQjtBQUtBUyxNQUFNLENBQUNDLE9BQVAsR0FBaUJYLE9BQWpCIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9rZXZpbl9saXUvRGVza3RvcC9XZWIvd3AxMDkyL2h3OC9vd24vYmFja2VuZC9yZXNvbHZlcnMvIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgTWVzc2FnZSA9IHtcbiAgc2VuZGVyKHBhcmVudCwgYXJncywgeyBkYiB9LCBpbmZvKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShkYi5Vc2VyTW9kZWwuZmluZEJ5SWQocGFyZW50LnNlbmRlcikpO1xuICB9LFxufTtcbm1vZHVsZS5leHBvcnRzID0gTWVzc2FnZTtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "message.js"
      ],
      "names": [
        "Message",
        "sender",
        "parent",
        "args",
        "db",
        "info",
        "Promise",
        "resolve",
        "UserModel",
        "findById",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAMA,OAAO,GAAG;AACdC,EAAAA,MAAM,CAACC,MAAD,EAASC,IAAT,EAAe;AAAEC,IAAAA;AAAF,GAAf,EAAuBC,IAAvB,EAA6B;AACjC,WAAOC,OAAO,CAACC,OAAR,CAAgBH,EAAE,CAACI,SAAH,CAAaC,QAAb,CAAsBP,MAAM,CAACD,MAA7B,CAAhB,CAAP;AACD;;AAHa,CAAhB;AAKAS,MAAM,CAACC,OAAP,GAAiBX,OAAjB",
      "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/",
      "sourcesContent": [
        "const Message = {\n  sender(parent, args, { db }, info) {\n    return Promise.resolve(db.UserModel.findById(parent.sender));\n  },\n};\nmodule.exports = Message;\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1623604302834
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend\",\"filename\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/user.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.14.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend",
      "filename": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/user.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/user.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/user.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/",
        "sourceFileName": "user.js"
      }
    },
    "ast": null,
    "code": "const User = {};\nmodule.exports = User;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuanMiXSwibmFtZXMiOlsiVXNlciIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLElBQUksR0FBRyxFQUFiO0FBQ0FDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQkYsSUFBakIiLCJzb3VyY2VSb290IjoiL1VzZXJzL2tldmluX2xpdS9EZXNrdG9wL1dlYi93cDEwOTIvaHc4L293bi9iYWNrZW5kL3Jlc29sdmVycy8iLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBVc2VyID0ge307XG5tb2R1bGUuZXhwb3J0cyA9IFVzZXI7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "user.js"
      ],
      "names": [
        "User",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAMA,IAAI,GAAG,EAAb;AACAC,MAAM,CAACC,OAAP,GAAiBF,IAAjB",
      "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/",
      "sourcesContent": [
        "const User = {};\nmodule.exports = User;\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1623604320894
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend\",\"filename\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/chatBox.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.14.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend",
      "filename": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/chatBox.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/chatBox.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/chatBox.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/",
        "sourceFileName": "chatBox.js"
      }
    },
    "ast": null,
    "code": "const ChatBox = {\n  messages(parent, args, {\n    db\n  }, info) {\n    return Promise.all(parent.messages.map(mId => db.MessageModel.findById(mId)));\n  }\n\n};\nmodule.exports = ChatBox;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXRCb3guanMiXSwibmFtZXMiOlsiQ2hhdEJveCIsIm1lc3NhZ2VzIiwicGFyZW50IiwiYXJncyIsImRiIiwiaW5mbyIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJtSWQiLCJNZXNzYWdlTW9kZWwiLCJmaW5kQnlJZCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBRztBQUNkQyxFQUFBQSxRQUFRLENBQUNDLE1BQUQsRUFBU0MsSUFBVCxFQUFlO0FBQUVDLElBQUFBO0FBQUYsR0FBZixFQUF1QkMsSUFBdkIsRUFBNkI7QUFDbkMsV0FBT0MsT0FBTyxDQUFDQyxHQUFSLENBQVlMLE1BQU0sQ0FBQ0QsUUFBUCxDQUFnQk8sR0FBaEIsQ0FBcUJDLEdBQUQsSUFBU0wsRUFBRSxDQUFDTSxZQUFILENBQWdCQyxRQUFoQixDQUF5QkYsR0FBekIsQ0FBN0IsQ0FBWixDQUFQO0FBQ0Q7O0FBSGEsQ0FBaEI7QUFNQUcsTUFBTSxDQUFDQyxPQUFQLEdBQWlCYixPQUFqQiIsInNvdXJjZVJvb3QiOiIvVXNlcnMva2V2aW5fbGl1L0Rlc2t0b3AvV2ViL3dwMTA5Mi9odzgvb3duL2JhY2tlbmQvcmVzb2x2ZXJzLyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IENoYXRCb3ggPSB7XG4gIG1lc3NhZ2VzKHBhcmVudCwgYXJncywgeyBkYiB9LCBpbmZvKSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHBhcmVudC5tZXNzYWdlcy5tYXAoKG1JZCkgPT4gZGIuTWVzc2FnZU1vZGVsLmZpbmRCeUlkKG1JZCkpKTtcbiAgfSxcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQ2hhdEJveDtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "chatBox.js"
      ],
      "names": [
        "ChatBox",
        "messages",
        "parent",
        "args",
        "db",
        "info",
        "Promise",
        "all",
        "map",
        "mId",
        "MessageModel",
        "findById",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAMA,OAAO,GAAG;AACdC,EAAAA,QAAQ,CAACC,MAAD,EAASC,IAAT,EAAe;AAAEC,IAAAA;AAAF,GAAf,EAAuBC,IAAvB,EAA6B;AACnC,WAAOC,OAAO,CAACC,GAAR,CAAYL,MAAM,CAACD,QAAP,CAAgBO,GAAhB,CAAqBC,GAAD,IAASL,EAAE,CAACM,YAAH,CAAgBC,QAAhB,CAAyBF,GAAzB,CAA7B,CAAZ,CAAP;AACD;;AAHa,CAAhB;AAMAG,MAAM,CAACC,OAAP,GAAiBb,OAAjB",
      "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/",
      "sourcesContent": [
        "const ChatBox = {\n  messages(parent, args, { db }, info) {\n    return Promise.all(parent.messages.map((mId) => db.MessageModel.findById(mId)));\n  },\n};\n\nmodule.exports = ChatBox;\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1623593750518
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend\",\"filename\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/Subscription.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.14.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend",
      "filename": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/Subscription.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/Subscription.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/Subscription.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/",
        "sourceFileName": "Subscription.js"
      }
    },
    "ast": null,
    "code": "const Subscription = {\n  chatbox: {\n    subscribe(parent, {\n      name\n    }, {\n      db,\n      pubsub\n    }, info) {\n      if (!db.ChatBoxModel.findOne({\n        name: name\n      })) {\n        throw new Error(\"Chatbox Not Found\");\n      }\n\n      return pubsub.asyncIterator(`chatbox ${name}`);\n    }\n\n  }\n};\nmodule.exports = Subscription;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlN1YnNjcmlwdGlvbi5qcyJdLCJuYW1lcyI6WyJTdWJzY3JpcHRpb24iLCJjaGF0Ym94Iiwic3Vic2NyaWJlIiwicGFyZW50IiwibmFtZSIsImRiIiwicHVic3ViIiwiaW5mbyIsIkNoYXRCb3hNb2RlbCIsImZpbmRPbmUiLCJFcnJvciIsImFzeW5jSXRlcmF0b3IiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxZQUFZLEdBQUc7QUFDbkJDLEVBQUFBLE9BQU8sRUFBRTtBQUNQQyxJQUFBQSxTQUFTLENBQUNDLE1BQUQsRUFBUztBQUFFQyxNQUFBQTtBQUFGLEtBQVQsRUFBbUI7QUFBRUMsTUFBQUEsRUFBRjtBQUFNQyxNQUFBQTtBQUFOLEtBQW5CLEVBQW1DQyxJQUFuQyxFQUF5QztBQUNoRCxVQUFJLENBQUNGLEVBQUUsQ0FBQ0csWUFBSCxDQUFnQkMsT0FBaEIsQ0FBd0I7QUFBRUwsUUFBQUEsSUFBSSxFQUFFQTtBQUFSLE9BQXhCLENBQUwsRUFBOEM7QUFDNUMsY0FBTSxJQUFJTSxLQUFKLENBQVUsbUJBQVYsQ0FBTjtBQUNEOztBQUVELGFBQU9KLE1BQU0sQ0FBQ0ssYUFBUCxDQUFzQixXQUFVUCxJQUFLLEVBQXJDLENBQVA7QUFDRDs7QUFQTTtBQURVLENBQXJCO0FBV0FRLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQmIsWUFBakIiLCJzb3VyY2VSb290IjoiL1VzZXJzL2tldmluX2xpdS9EZXNrdG9wL1dlYi93cDEwOTIvaHc4L293bi9iYWNrZW5kL3Jlc29sdmVycy8iLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBTdWJzY3JpcHRpb24gPSB7XG4gIGNoYXRib3g6IHtcbiAgICBzdWJzY3JpYmUocGFyZW50LCB7IG5hbWUgfSwgeyBkYiwgcHVic3ViIH0sIGluZm8pIHtcbiAgICAgIGlmICghZGIuQ2hhdEJveE1vZGVsLmZpbmRPbmUoeyBuYW1lOiBuYW1lIH0pKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNoYXRib3ggTm90IEZvdW5kXCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHVic3ViLmFzeW5jSXRlcmF0b3IoYGNoYXRib3ggJHtuYW1lfWApO1xuICAgIH0sXG4gIH0sXG59O1xubW9kdWxlLmV4cG9ydHMgPSBTdWJzY3JpcHRpb247XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "Subscription.js"
      ],
      "names": [
        "Subscription",
        "chatbox",
        "subscribe",
        "parent",
        "name",
        "db",
        "pubsub",
        "info",
        "ChatBoxModel",
        "findOne",
        "Error",
        "asyncIterator",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAMA,YAAY,GAAG;AACnBC,EAAAA,OAAO,EAAE;AACPC,IAAAA,SAAS,CAACC,MAAD,EAAS;AAAEC,MAAAA;AAAF,KAAT,EAAmB;AAAEC,MAAAA,EAAF;AAAMC,MAAAA;AAAN,KAAnB,EAAmCC,IAAnC,EAAyC;AAChD,UAAI,CAACF,EAAE,CAACG,YAAH,CAAgBC,OAAhB,CAAwB;AAAEL,QAAAA,IAAI,EAAEA;AAAR,OAAxB,CAAL,EAA8C;AAC5C,cAAM,IAAIM,KAAJ,CAAU,mBAAV,CAAN;AACD;;AAED,aAAOJ,MAAM,CAACK,aAAP,CAAsB,WAAUP,IAAK,EAArC,CAAP;AACD;;AAPM;AADU,CAArB;AAWAQ,MAAM,CAACC,OAAP,GAAiBb,YAAjB",
      "sourceRoot": "/Users/kevin_liu/Desktop/Web/wp1092/hw8/own/backend/resolvers/",
      "sourcesContent": [
        "const Subscription = {\n  chatbox: {\n    subscribe(parent, { name }, { db, pubsub }, info) {\n      if (!db.ChatBoxModel.findOne({ name: name })) {\n        throw new Error(\"Chatbox Not Found\");\n      }\n\n      return pubsub.asyncIterator(`chatbox ${name}`);\n    },\n  },\n};\nmodule.exports = Subscription;\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1623661531934
  }
}